<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
This is an example weekly progress report document that team members can use to report their individual progress 
of their ECE477 senior design projects. Weekly progress reports are expected to follow the general guidelines
presented in the "Progress Report Policy" document, available online at https://engineering.purdue.edu/ece477/Course/Policies/policies.html

Please create 4 copies of this example, renaming each copy to <PurdueID>.html, where <PurdueID> corresponds to
the Purdue ITAP Career Account ID given by Purdue to each individual team member. If you have any questions,
contact course staff.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!--Reconfigurable base tag; used to modify the site root location for root-relative links-->
<!--<base href="https://engineering.purdue.edu/ece477/StudentWebTemplate/" />-->

<!--Content-->
<title>ECE477 Progress Report</title>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="author" content="George Hadley">
<meta name = "format-detection" content = "telephone=no" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!--CSS-->
<link rel="stylesheet" href="../../css/default.css" type="text/css" media="all" />
<link rel="stylesheet" href="../../css/responsive.css">
<link rel="stylesheet" href="../../css/styles.css">
<link rel="stylesheet" href="../../css/content.css">
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->

</head>
<body>
<div id="wrapper_site">
    <div id="wrapper_page">
	<!-- Instantiate global site header.-->
	<div id="header"></div>
		<!-- Instantiate site global navigation bar.-->
		<div id="menu"></div>

		<!-- Instantiate a page banner image. Page banner images should be 1100x350px and should be located within the local
			img folder located at this directory level. -->
		<div id="banner">
			<img src="../img/ckemmet_progress/pls_crop.png"></img>
		</div>

		<!-- Instantiate "tools" needed for a page. Tools are premade functional blocks that can be used to build a page,
			and include things such as a file lister (for listing out homework assignments or tutorials)
		-->
		<div id="content">
            <h2>Progress Report for Carrie Kemmet</h2>

            <h4>Week 2:</h4>
            <b>Date:</b> September 11, 2020<br>
            <b>Total hours:</b> 8:30 <br>
			<b><br>Description of design efforts:</b><br>
			
			This week, I reviewed the theory behind the components that I am primarily responsible for and developed practical 
			ways to prototype the hardware. In addition to selecting the devices, I researched their applications, limits, programming, 
			and theory. I also ordered development kits so that I could start experimenting with them next week.

			<br><br>The two components that I focused on were the radio transceiver and the coulomb counter.  The research was mostly
			 conducted via the Google search engine. Detailed below are the main findings and how they impact the project.

			<br><br>Each Snow-weAR system requires a radio transceiver chip. After investigating various physical layer protocols, LoRa 
			(Long Range) protocol was selected. The advantages of LoRa are that it’s license free, low power, and high range, which is a
			 trade-off for the low data rate [1]. I found several development kits and a wide variety of source code[2] for the selected
			 chip that demonstrates ease of use and a wide range of capabilities.
			<br>
			<table>
                <tr>
					<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
						<a href="https://www.mdpi.com/sensors/sensors-20-02028/article_deploy/html/images/sensors-20-02028-g001.png">	
						<img src="../img/ckemmet_progress/LoRaWAN.png" style="height: 150px;"><br><b>Figure 1: Example of a LoRa Network</i>[7]</td>
					</a>

					<td>Although this application of LoRa only requires point to point communication, the LoRaWAN communication protocol 
					allows expansion to mesh networking. This LPWAN (low power wide area network) network stack allows bidirectional 
					communication between a gateway and several nodes spread across kilometers and has important applications across industry, 
					from agriculture to smart cities [3]. Future projects could expand on Snow-weAR to increase range, data availability, and 
					processing.</td>
                </tr>
            </table>
            <br>
			<table>
                <tr>
                    <td>In addition to researching LoRa, I also checked out various power monitoring methods, primarily ADC’s and coulomb
						counters. Because we are using a Lithium Ion battery, a coulomb counter is more appropriate for the application. This is because
						 battery consumption is less strongly correlated with voltage variance and ADC’s therefore provide little accuracy. [4]
						 Coulomb counters function by integrating current flowing through the circuit over time and relaying the SOC (State of Charge), or the 
						 ratio between the amount of energy currently stored and the capacity. [5] This coulomb counter will allow the system to accurately 
						 report charge and discharge, within 10% as stated within the PSSC, and potentially down to 1% error.
					</td>
					<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
						<a href="https://www.powertechsystems.eu/wp-content/uploads/sites/6/2018/11/OCV-vs-SOC-EN.png.webp">	
						<img src="../img/ckemmet_progress/Lithium_vs_AGM.png" style="height: 250px;"><br><b>Figure 2: Battery Voltage vs Discharge </i>[8]</td>
					</a>
					<tr>
            </table>
			<br>
			I also bought an Arduino Uno and a set of modules to start experimenting with LoRa. I plan on using the Arduino to conduct experiments due 
			to ease of use and the presence of existing libraries, and on the other end of the transceiver I will use the project microcontroller to ensure
			successful implementation. A coulomb counter module by SparkFun was also identified and will be ordered for prototyping purposes. [6]
			</br>
            <br>
		</tr>
		<br>
		<h4>Week 3:</h4>
		<b>Date:</b> September 18, 2020<br>
		<b>Total hours:</b> 10:00 <br>
		<b><br>Description of design efforts:</b>

		<table>
			<tr><td>
			This week, I spent a lot of time on the homework, because it was my turn to do the assignment. Aside from that, I spent a 
			lot of time organizing our schematic now that we have our components selected. I did some research on voltage regulators and discovered 
			that our system needed an LDO regulator due to the small difference between the supply voltage and the highest voltage required by any 
			component. I also researched various batteries and determined the minimum power requirements for a battery to last the amount of time 
			needed for the functional specifications.	
			</td>			
			<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
				<a href="../img/ckemmet_progress/time_pie_chart.png">	
				<img src="../img/ckemmet_progress/time_pie_chart.png" style="height: 150px;"><br><b>Figure 1: </b><i>Time allocation for the week</i></b></td>
			</a>

			</tr>
		</table>
		<br>
		Pictured is part of the work I did on the schematic. In a file, I saved images of sample schematics for every component. 
					I divided the components into three systems: sensing, power, and radio. I then generalized the diagrams by including output
					 pins from the schematics and their connections. The purpose of this is to see how all of the chips interact with each other,
					  the main processor, and the voltage source. Any wires or small components that are part of detailed circuitry are not 
					  included. These diagrams will inform the final design of the schematic and also help confirm that all currents and voltages 
					  meet system requirements.
		<br>
		<div class="fruitbowl">
			<div class="apple"><a href="../img/ckemmet_progress/Power Schematic.png">
			<img src="../img/ckemmet_progress/Power Schematic.png" style="width: 250px;padding-right: 20px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/coulombcounter.png">
			<img src="../img/ckemmet_progress/coulombcounter.png"  style="width: 250px;padding-right: 20px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/regulator.png">
			<img src="../img/ckemmet_progress/regulator.png"  style="width: 250px;" alt="Apple" /></div></a>
			</div>
		<br><b>Figure 2: </b><i>My simplified schematic (left), the coulomb counter complete schematic [9] (center), and the regulator schematic [10] (right)</i></b>
		<br><br>
		<h4>Week 4:</h4>
		<b>Date:</b> September 25, 2020<br>
		<b>Total hours:</b> 6:00 <br>
		<b><br>Description of design efforts:</b>


		<table>
			<tr><td>
			Most of this week was spent interfacing with development kits for the components that we will use for our final implementation. Pictured below is my setup.
			I also spent time configuring an Arduino Uno and LCD, however, I later realized that this is currently unnecessary, although it may come in handy later.
			I spent considerable time trying to interface with the transceiver chip, and was unable to establish a serial connection. The CP210x driver on my computer isn't 
			recognizing the chip so I need to reconfigure that.

			Although I didn't get much working on the hardware side, I learned a lot about the procedure of programming the transciever chip. This includes the steps needed 
			during the setup period, as well as the various modes that it can enter, such as a receeving state. Additionally, familiarized myself with the transmission 
			protocol and with unpacking incoming data. The Github repository that I am using to supplement the datasheet information can be found <a 
			href="https://github.com/HelTecAutomation/Heltec_ESP32/tree/master/src/lora">here</a>.
			</td>
			</tr>
		</table>
		<br>
		<div class="fruitbowl">
			<div class="apple"><a href="../img/ckemmet_progress/transceiver_wifi.jpg">
			<img src="../img/ckemmet_progress/transceiver_wifi.jpg" style="height: 250px;padding-right: 20px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/Uno.jpg">
			<img src="../img/ckemmet_progress/Uno.jpg"  style="height: 250px;padding-right: 20px;" alt="Apple" /></a>
			</div>
		<br><b>Figure 1: </b><i>Radio transciever module (left), and Arduino Uno (right) setups</i></b>
		
		<br><br>
		<h4>Week 5:</h4>
		<b>Date:</b> October 2, 2020<br>
		<b>Total hours:</b> 12:00 <br>
		<b><br>Description of design efforts:</b>
		<br><br>

		<table>
			<tr><td>
				This week, the schematic took up the majority of my time. I was in charge of 
				power circuitry for the schematic including the charging circuit, the battery gauge, the battery, and the voltage regulators, as well as the LoRa transceiver system
				and part of the microcontroller. In addition to this, I coordinated the effort among my teammates and delegated the design of the IMU, GPS, and OLED. I then synthesized
				all of the information into a single draft.<br><br>
		
				There was a learning curve to using kicad, but most of my time was spent referencing datasheets to check out sample schematics and connections for each 
				system. I also had to use lookup tables to modify the system for our application. For example, the capacitor values on the voltage regulators determine their output voltage
				and were different for 1.8 volts and 3.3 volts. I also had to make sure all of the appropriate connectors were in place. <br><br>
			</td>			
			<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
				<a href="../img/ckemmet_progress/Schematic.png">	
				<img src="../img/ckemmet_progress/Schematic.png" style="height: 250px;"><br><b>Figure 1: </b><i>Completed schematic draft</i></b></td>
			</a>

			</tr>
		</table>

		There is still a little bit of work I would like to get done on the schematic. I want to add headers to ensure that we can correctly program the device and switch out the
		charging circuit for a separate charging module, which would be a lot simpler. We could select one that is specific to the battery as well to avoid complications (ie: 
		explosions).<br><br>
		<br>
		<div class="fruitbowl">
			<div class="apple"><a href="../img/ckemmet_progress/LoRaSchematic.png">
			<img src="../img/ckemmet_progress/LoRaSchematic.png" style="height: 150px;padding-right: 20px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/BatteryGaugeSchematic.png">
			<img src="../img/ckemmet_progress/BatteryGaugeSchematic.png"  style="height: 150px;padding-right: 20px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/LDOSchematic.png">
			<img src="../img/ckemmet_progress/LDOSchematic.png"  style="height: 150px;" alt="Apple" /></a>
			<a href="../img/ckemmet_progress/ChargingCircuitSchematic.png">
			<img src="../img/ckemmet_progress/ChargingCircuitSchematic.png"  style="height: 150px;" alt="Apple" /></div></a>
			</div>
		<br><b>Figure 2: </b><i>A collection of the individual components that I drafted the schematic for.</i></b>
		<br><br>
		On a separate note, I got the LoRa transceiver chip to <a href="https://youtu.be/aN5tGtcurM4">work</a>. It turns out that I was referencing the wrong port the entire time and my driver was fine. So it goes. 

		<br><br>
		<h4>Week 6:</h4>
		<b>Date:</b> October 2, 2020<br>
		<b>Total hours:</b> 10:00 <br>
		<b><br>Description of design efforts:</b>
		<br><br>
		The team spent the week getting the first draft of the PCB ready to show course staff during our Thursday meeting. The design review is on Tuesday, so a lot of our efforts are going towards
		collecting all of our data and information in a central location. The schematic ended up needing a lot of work this week, despite its deceptive appearance of being almost completed the week
		before. Leadership of the project transferred from me to Mitchell, and he gets major credit for spearheading the effort to polish our schematic and to get it ready for transfer to a PCB. Of 
		course, the finished product was a team effort as always.<br><br>

		<table>
			<tr><td>
				I helped out primarily with collecting footprint libraries and verifying component appropriateness for a lot of the system. I selected a connector for the LoRa and GPS antennas, and did
				calculations for various values in the schematic, such as series resistors for the LED's. I also did more research into modules for the system, specifically the Battery Babysitter. I added a 
				voltage regulator circuit to further protect the system. In selecting the voltage regulator, I ensured that the power consumption would not lead to overheating using the chip's thermal
				resistance, and that the output current would be appropriate for our application using the currents listed in the electrical overview assignment. The voltage drop is 400 mV maximum which is 
				the ideal drop considering that the battery output is 3.7V and the circuit requires 3.3V.</td>	</div></td><td>		
			<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
				<a href="../img/ckemmet_progress/regulator_footprint.png">	
				<img src="../img/ckemmet_progress/regulator_footprint.png" style="height: 100px;"><br><b>Figure 1: </b><i>Voltage regulator footprint</i></b></td>
			</a>
			
				<td style="text-align: center; font-size: 10px; margin-bottom: 0px; padding-right: 10px; line-height: 15px;">
					<a href="../img/ckemmet_progress/regulator_cad.png">	
					<img src="../img/ckemmet_progress/regulator_cad.png" style="height: 100px;"><br><b>Figure 2: </b><i>Voltage regulator model</i></b></td>
			</tr>
		</table>
		<br><br>
		<b>Sources Cited:</b><br>
		<p style="line-height: 20px;">[1] LoRa-alliance.org. 2020. <i>LoRa Alliance.</i> [online] Available at: &lthttps://lora-alliance.org/sites/default/files/2018-04/what-is-lorawan.pdf> [Accessed 9 September 2020].<br>
			[2] mbed.com. 2018. <i>ARM Mbed.</i> [online] Available at: &lthhttps://lora-alliance.org/sites/default/files/2018-04/what-is-lorawan.pdf> [Accessed 9 September 2020].<br>
			[3] F. Adelantado, X. Vilajosana, P. Tuset-Peiro, B. Martinez, J. Melia-Segui, and T. Watteyne, “Understanding the Limits of LoRaWAN,” IEEE Communications Magazine, vol. 55, no. 9, pp. 34–40, 2017,  [Accessed 9 September 2020]. <br>
			[4] PowerTechSystems.com. 2020. <i>PowerTech.</i> [online] Available at: &lthttps://www.powertechsystems.eu/home/tech-corner/lithium-ion-state-of-charge-soc-measurement/> [Accessed 9 September 2020].<br>
			[5] ScienceDirect.com. 2020. <i>ScienceDirect.</i> [online] Available at: &lthttps://www.sciencedirect.com/topics/engineering/coulomb-counting/> [Accessed 9 September 2020].<br>
			[6] Learn.SparkFun.com. 2020. <i>sparkfun.</i> [online] Available at: &lthttps://learn.sparkfun.com/tutorials/ltc4150-coulomb-counter-hookup-guide/all> [Accessed 9 September 2020].<br>
			[7] Learn.SparkFun.com. 2020. <i>sparkfun.</i> [online] Available at: &lthttps://learn.sparkfun.com/tutorials/ltc4150-coulomb-counter-hookup-guide/all> [Accessed 9 September 2020].<br>
			[8] G. Codeluppi, A. Cilfone, L. Davoli, and G. Ferrari, “LoRaFarM: A LoRaWAN-Based Smart Farming Modular IoT Architecture,” Sensors, vol. 20, no. 7, p. 2028, 2020. [Accessed 9 September 2020].<br>
			[9] “BQ34110PW ACTIVE,” Texas Instruments. [Online]. Available: https://www.ti.com/store/ti/en/p/product/?p=BQ34110PW. [Accessed: 16-Sep-2020]. <br>
			[10] Mousern.com. 2020. <i>mouser.</i> [online] Available at:&lthttps://www.mouser.com/datasheet/2/760/XC6220-837466.pdf> [Accessed 15 September 2020]. <br>
		</p>
	
	</div>
		<!-- Instantiate global footer. Any changes to the footer should be made through the top-level file "footer.html" -->
		<div id="footer"></div>
    </div>
</div>

<!--JS-->
<script src="../../js/jquery.js"></script>
<script src="../../js/jquery-migrate-1.1.1.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#header").load("../../header.html");
	$("#menu").load("../../navbar.html");
	$("#footer").load("../../footer.html");
});
</script>
</body>
</html>
